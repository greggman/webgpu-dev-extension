{"version":3,"file":"add-descriptors.js","sources":["../../src/scripts/add-descriptors.js"],"sourcesContent":["if (typeof GPUDevice !== 'undefined') {\n  console.log('webgpu-dev-extension: add-descriptors');\n  function addDescriptorWrapper(API, fnName) {\n    const origFn = API.prototype[fnName];\n    API.prototype[fnName] = function (desc) {\n      const result = origFn.call(this, desc);\n      result.description = {...desc};\n      return result;\n    };\n  }\n\n  function addDescriptorWrapperAsync(API, fnName) {\n    const origFn = API.prototype[fnName];\n    API.prototype[fnName] = async function (desc) {\n      const result = await origFn.call(this, desc);\n      result.description = {...desc};\n      return result;\n    };\n  }\n\n  addDescriptorWrapper(GPUCommandEncoder, 'beginRenderPass')\n  addDescriptorWrapper(GPUCommandEncoder, 'beginComputePass')\n\n  addDescriptorWrapper(GPUDevice, 'createBindGroup');\n  addDescriptorWrapper(GPUDevice, 'createBindGroupLayout');\n  addDescriptorWrapper(GPUDevice, 'createComputePipeline');\n  addDescriptorWrapperAsync(GPUDevice, 'createComputePipelineAsync');\n  addDescriptorWrapper(GPUDevice, 'createPipelineLayout');\n  addDescriptorWrapper(GPUDevice, 'createQuerySet');\n  addDescriptorWrapper(GPUDevice, 'createRenderBundleEncoder');\n  addDescriptorWrapper(GPUDevice, 'createRenderPipeline');\n  addDescriptorWrapperAsync(GPUDevice, 'createRenderPipelineAsync');\n  addDescriptorWrapper(GPUDevice, 'createSampler');\n  addDescriptorWrapper(GPUDevice, 'createShaderModule');\n  addDescriptorWrapper(GPUDevice, 'importExternalTexture');\n\n  GPUTexture.prototype.createView = (function(origFn) {\n    return function(desc = {}) {\n      const view = origFn.call(this, desc);\n      view.description = {\n        ...desc,\n        texture: this,\n      };\n      return view;\n    };\n  })(GPUTexture.prototype.createView);\n}\n\ndocument.currentScript?.remove();\n"],"names":[],"mappings":";;;EAAA,IAAI,OAAO,SAAS,KAAK,WAAW,EAAE;EACtC,EAAE,OAAO,CAAC,GAAG,CAAC,uCAAuC,CAAC;EACtD,EAAE,SAAS,oBAAoB,CAAC,GAAG,EAAE,MAAM,EAAE;EAC7C,IAAI,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC;EACxC,IAAI,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,UAAU,IAAI,EAAE;EAC5C,MAAM,MAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC;EAC5C,MAAM,MAAM,CAAC,WAAW,GAAG,CAAC,GAAG,IAAI,CAAC;EACpC,MAAM,OAAO,MAAM;EACnB,KAAK;EACL;;EAEA,EAAE,SAAS,yBAAyB,CAAC,GAAG,EAAE,MAAM,EAAE;EAClD,IAAI,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC;EACxC,IAAI,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,gBAAgB,IAAI,EAAE;EAClD,MAAM,MAAM,MAAM,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC;EAClD,MAAM,MAAM,CAAC,WAAW,GAAG,CAAC,GAAG,IAAI,CAAC;EACpC,MAAM,OAAO,MAAM;EACnB,KAAK;EACL;;EAEA,EAAE,oBAAoB,CAAC,iBAAiB,EAAE,iBAAiB;EAC3D,EAAE,oBAAoB,CAAC,iBAAiB,EAAE,kBAAkB;;EAE5D,EAAE,oBAAoB,CAAC,SAAS,EAAE,iBAAiB,CAAC;EACpD,EAAE,oBAAoB,CAAC,SAAS,EAAE,uBAAuB,CAAC;EAC1D,EAAE,oBAAoB,CAAC,SAAS,EAAE,uBAAuB,CAAC;EAC1D,EAAE,yBAAyB,CAAC,SAAS,EAAE,4BAA4B,CAAC;EACpE,EAAE,oBAAoB,CAAC,SAAS,EAAE,sBAAsB,CAAC;EACzD,EAAE,oBAAoB,CAAC,SAAS,EAAE,gBAAgB,CAAC;EACnD,EAAE,oBAAoB,CAAC,SAAS,EAAE,2BAA2B,CAAC;EAC9D,EAAE,oBAAoB,CAAC,SAAS,EAAE,sBAAsB,CAAC;EACzD,EAAE,yBAAyB,CAAC,SAAS,EAAE,2BAA2B,CAAC;EACnE,EAAE,oBAAoB,CAAC,SAAS,EAAE,eAAe,CAAC;EAClD,EAAE,oBAAoB,CAAC,SAAS,EAAE,oBAAoB,CAAC;EACvD,EAAE,oBAAoB,CAAC,SAAS,EAAE,uBAAuB,CAAC;;EAE1D,EAAE,UAAU,CAAC,SAAS,CAAC,UAAU,GAAG,CAAC,SAAS,MAAM,EAAE;EACtD,IAAI,OAAO,SAAS,IAAI,GAAG,EAAE,EAAE;EAC/B,MAAM,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC;EAC1C,MAAM,IAAI,CAAC,WAAW,GAAG;EACzB,QAAQ,GAAG,IAAI;EACf,QAAQ,OAAO,EAAE,IAAI;EACrB,OAAO;EACP,MAAM,OAAO,IAAI;EACjB,KAAK;EACL,GAAG,EAAE,UAAU,CAAC,SAAS,CAAC,UAAU,CAAC;EACrC;;EAEA,QAAQ,CAAC,aAAa,EAAE,MAAM,EAAE;;;;;;"}