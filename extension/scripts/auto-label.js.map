{"version":3,"file":"auto-label.js","sources":["../../src/scripts/auto-label.js"],"sourcesContent":["if (typeof GPUDevice !== 'undefined') {\n  console.log('webgpu-dev-extension: auto-label');\n\n  function addLabelWrapper(API, fnName) {\n    const prefix = fnName.replace(/^[a-z]+/, '').replace(/(.)/, (_, m) => m.toLowerCase());\n    let count = 0;\n\n    const origFn = API.prototype[fnName];\n    API.prototype[fnName] = function (_desc) {\n      const desc = {\n        label: `${prefix}${++count}`,\n        ..._desc || {},\n      };\n      return origFn.call(this, desc);\n    };\n  }\n\n  addLabelWrapper(GPUCommandEncoder, 'beginRenderPass');\n  addLabelWrapper(GPUCommandEncoder, 'beginComputePass');\n\n  addLabelWrapper(GPUDevice, 'createBindGroup');\n  addLabelWrapper(GPUDevice, 'createBindGroupLayout');\n  addLabelWrapper(GPUDevice, 'createBuffer');\n  addLabelWrapper(GPUDevice, 'createComputePipeline');\n  addLabelWrapper(GPUDevice, 'createComputePipelineAsync');\n  addLabelWrapper(GPUDevice, 'createPipelineLayout');\n  addLabelWrapper(GPUDevice, 'createQuerySet');\n  addLabelWrapper(GPUDevice, 'createRenderBundleEncoder');\n  addLabelWrapper(GPUDevice, 'createRenderPipeline');\n  addLabelWrapper(GPUDevice, 'createRenderPipelineAsync');\n  addLabelWrapper(GPUDevice, 'createSampler');\n  addLabelWrapper(GPUDevice, 'createShaderModule');\n  addLabelWrapper(GPUDevice, 'createTexture');\n  addLabelWrapper(GPUDevice, 'importExternalTexture');\n\n  {\n    const textureToViewCount = new WeakMap();\n    GPUTexture.prototype.createView = (function (origFn) {\n      return function (_desc) {\n        const count = (textureToViewCount.get(this) || 0) + 1;\n        textureToViewCount.set(this, count);\n        const desc = {\n          label: `view${count}-[${this.label}]`,\n          ..._desc || {},\n        };\n        return origFn.call(this, desc);\n      };\n    })(GPUTexture.prototype.createView);\n  }\n\n\n  {\n    let count = 0;\n    GPUCanvasContext.prototype.getCurrentTexture = (function (origFn) {\n      return function (...args) {\n        const texture = origFn.call(this, ...args);\n        if (texture.label === '') {\n          texture.label = `canvasTexture${++count}[${this.canvas.id || ''}]`;\n        }\n        return texture;\n      };\n    })(GPUCanvasContext.prototype.getCurrentTexture);\n  }\n}\n\ndocument.currentScript?.remove();\n"],"names":[],"mappings":"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"}